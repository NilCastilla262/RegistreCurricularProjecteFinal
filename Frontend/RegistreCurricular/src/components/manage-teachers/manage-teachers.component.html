<div class="manage-teachers">
  <h2>Gestió de Professors</h2>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Nom</th><th>Email</th><th>Rol</th>
        </tr>
      </thead>
      <tbody>
        @for (t of teachers; track t.email) {
          <tr>
            <td>{{ t.name || '-' }}</td>
            <td>{{ t.email }}</td>
            <td>{{ getRoleLabel(t.role) }}</td>
          </tr>
        }
        @empty {
          <tr>
            <td colspan="3" class="empty-state">No hi ha professors assignats a aquest centre</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <button (click)="toggleForm()" class="add-button">
    <span class="button-icon">+</span> Afegir professor
  </button>

  @if (showForm) {
    <form (ngSubmit)="submitNewTeacher()">
      <input
        type="email"
        [(ngModel)]="newEmail"
        name="email"
        maxlength="50"
        required
        placeholder="Email del professor"
      />
      <select
        [(ngModel)]="newRole"
        name="role"
        required
      >
        <option [ngValue]="null" disabled selected>-- Selecciona un rol --</option>
        <option [ngValue]="1">Professor</option>
        <option [ngValue]="2">Administrador de centre</option>
      </select>
      <div class="form-buttons">
        <button type="submit">Desar</button>
        <button type="button" (click)="toggleForm()">Cancel·lar</button>
      </div>
    </form>
  }
</div>
