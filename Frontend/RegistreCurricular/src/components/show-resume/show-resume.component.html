<ng-container *ngIf="groupedResume.length > 0; else noData">
  <div *ngFor="let subj of groupedResume">
    <h2 (click)="subj.expanded = !subj.expanded" class="subject-header">
      {{ subj.expanded ? '▾' : '▸' }} {{ subj.name }}
    </h2>

    <div *ngIf="subj.expanded" class="subject-body">
      <div *ngFor="let comp of subj.competencies">
        <h3 (click)="comp.expanded = !comp.expanded" class="competency-header">
          {{ comp.expanded ? '▾' : '▸' }} {{ comp.order }}. {{ comp.name }}
        </h3>
        <ul *ngIf="comp.expanded">
          <li *ngFor="let crit of comp.criteria">
            {{ crit.mainOrder }}.{{ crit.order }}. {{ crit.name }} — Total treballat: {{ crit.total }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #noData>
  <p>No hi ha dades per mostrar.</p>
</ng-template>
