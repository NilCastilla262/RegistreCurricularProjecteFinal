@if (groupedResume.length > 0) {
  @for (subj of groupedResume; track subj.name) {
    <div>
      <h2 (click)="subj.expanded = !subj.expanded" class="subject-header">
        {{ subj.expanded ? '▾' : '▸' }} {{ subj.name }}
      </h2>

      @if (subj.expanded) {
        <div class="subject-body">
          @for (comp of subj.competencies; track comp.name) {
            <h3 (click)="comp.expanded = !comp.expanded" class="competency-header">
              {{ comp.expanded ? '▾' : '▸' }} {{ comp.order }}. {{ comp.name }}
            </h3>

            @if (comp.expanded) {
              <ul class="criteria-list">
                @for (crit of comp.criteria; track crit.name) {
                  <li class="criteria-row">
                    <span class="criteria-desc">
                      {{ crit.mainOrder }}.{{ crit.order }}. {{ crit.name }}
                    </span>
                    <span class="criteria-total">
                      Treballat:{{ crit.total }}
                    </span>
                  </li>
                }
              </ul>
            }
          }
        </div>
      }
    </div>
  }
} @else {
  <p>No hi ha dades per mostrar.</p>
}
